.form-horizontal.form-label-left{:style => "overflow:auto;"}
  .row.no-margin
    .col-md-6.col-sm-6.col-xs-12
      %h4 Packaging Slip Information
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Customer Name
        %span.col-md-8.col-sm-8.col-xs-12.field-value          
          = @sales_order.customer.name
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Sales Order #
        %span.col-md-8.col-sm-8.col-xs-12.field-value          
          = @sales_order.token
    .col-md-6.col-sm-6.col-xs-12.text-right
      %input#pack_req_url{type: 'hidden', value: "#{pack_sales_order_path(@sales_order)}"}
      %input#pack_remove_url{type: 'hidden', value: "#{remove_activity_sales_order_path(@sales_order)}"}
      - if @sales_order.confirmed?
        %a#btn_pack_submit.btn.btn-primary{:href => 'javascript:;'}
          Save      
    .col-md-12{:style => "overflow:auto;"}
      %h4 Product Information
      / start project list
      %div
        %table#product_list.table.table-bordered.projects.margin-bottom-5
          %thead
            %tr
              %th{:style => "width: 15%"} SKU
              %th{:style => "width: 20%"} Product Name
              %th{:style => "width: 15%"} Qty to Pack
              %th{:style => "width: 15%"} Packaging
              %th{:style => "width: 30%"} Note
          %tbody
          - @sales_order.sales_items.each do |item|
            %tr
              %td 
                =item.sold_item.sku    
              %td 
                =item.sold_item.name
              %td 
                =item.quantity_to_pack
              %td.editable{"contentEditable" => "true"}
              %td.editable{"contentEditable" => "true"} 
              %td{:style => "display: none;"} 
                =item.id
  .ln_solid
  .row.no-margin
    .col-md-12{:style => "overflow:auto;"}
      %h4 Packaging Slips
      / start project list
      %div
        %table#activity_list.table.table-bordered.projects.margin-bottom-5
          %thead
            %tr
              %th Tracking Number
              %th SKU
              %th Product Name
              %th Packaging Date
              %th Packaging Qty
              %th Note
              %th Updated By
              %th 
          - elem_num = @sales_order.pack_activities_elems
          - pack_token = @sales_order.ship_activities_datas
          - prev_data = ''
          - @sales_order.pack_activities.each do |item| 
            %tr
              - if prev_data != item.token
                %td{rowspan: elem_num[item.token].to_i}
                  =item.token              
              %td 
                =item.sales_item.sold_item.sku
              %td 
                =item.sales_item.sold_item.name
              %td 
                =item.created_at.to_date
              %td 
                =item.quantity
              %td 
                =item.note
              %td 
                =item.updated_by.email      
              - if prev_data != item.token
                %td{rowspan: elem_num[item.token].to_i}
                  - unless pack_token.include? item.token
                    %a.remove_track_link{href: 'javascript:;', "data-activity": item.token}
                      %i.fa.fa-icon.fa-minus-circle
              - prev_data = item.token
:javascript
  $(document).ready(function() {
    SalesOrderDetail.handleOrderPackageTab();
  });
