.row
  .col-md-12.col-sm-12.col-xs-12
    .title_right
      .col-md-8.col-sm-8.col-xs-12
        - if !params[:key].blank?
          %h4
            Search by "#{params[:key]}"
  .col-md-12
    %table.table.table-hover.projects
      %thead
        %tr
          %th{width: '1%'}
            %input.group-checkable{type: 'checkbox'}
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'date', sort: 'asc'} do
              Date
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'order_no', sort: 'asc'} do
              Sales Order#
          %th{width: '20%'}
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'company', sort: 'asc'} do
              Customer Name
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'status', sort: 'asc'} do
              Status
          %th.text-center
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'packed', sort: 'asc'} do
              Packed
          %th.text-center
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'delivered', sort: 'asc'} do
              Delivered
          %th.text-center
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'invoiced', sort: 'asc'} do
              Invoiced
          %th.text-center
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'fullfilled', sort: 'asc'} do
              Fullfilled
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'amount', sort: 'asc'} do
              Amount
          %th
      %tbody
      - @sales_orders.each do |order|
        %tr{class: "status"}
          %td.bulk_action  
            %input{type: 'checkbox', value: "#{order.id}", name: "table_records"}
          %td
            = order.order_date
          %td
            %a{:href => sales_order_path(id: order.id, type:params[:type])}
              = order.token
          %td
            %a{:href => customer_path(id: order.customer.id)}
              = order.customer_full_name.html_safe
          %td
            = order.status_label.capitalize
          %td.text-center
            %span{class: order.packed? || order.shipped? || order.fullfilled? ? "orange-status-active" : ""}
              %i.fa.fa-icon.fa-circle
          %td.text-center
            %span{class: order.shipped? || order.fullfilled? ? "blue-status-active" : ""}
              %i.fa.fa-icon.fa-circle
          %td.text-center
            %span{class: order.invoices.length > 0 ? "white-blue-status-active" : ""}
              %i.fa.fa-icon.fa-circle
          %td.text-center
            %span{class: order.fullfilled? ? "green-status-active" : ""}
              %i.fa.fa-icon.fa-circle
          %td.money
            = order.total_amount
          %td.text-left
            - if order.quote?
              = link_to update_status_sales_order_path(order, {save_action: 'confirm'}), method: :post, :class => "btn btn-success btn-xs", title: 'Confirm' do
                %i.fa.fa-check
              = link_to sales_order_path(order), method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-danger btn-xs", title: 'Cancel' do
                %i.fa.fa-times
              = link_to '#', :class => "btn btn-primary btn-xs", title: 'Email' do
                %i.fa.fa-envelope
              = link_to '#', :class => "btn btn-info btn-xs", title: 'Print' do
                %i.fa.fa-print
  .col-md-12{:style => "text-align: center;"}  
    = will_paginate @sales_orders, renderer: BootstrapPagination::Rails, :previous_label => '&lsaquo;', :next_label => '&rsaquo;'
    %input{type: 'hidden', id: 'params', data: { order: "#{params[:order]}", sort: "#{params[:sort]}", key: "#{params[:key]}", type: "#{params[:type]}"}}
:javascript
  jQuery(document).ready(function() {
    SalesOrderList.initSalesOrderList();
  });