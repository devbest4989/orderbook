= form_for(@customer, html: { class: 'form-horizontal form-label-left input_mask', 'data-parsley-validate' => '', :multipart => true }) do |f|
  .row
    .col-md-6.col-sm-6.col-xs-12.col-md-offset-3
      - if @customer.errors.any? && flash[:last_action] == "update_info"
        .alert.alert-danger.alert-dismissible.fade.in{:role => "alert"}
          %button.close{"aria-label" => "Close", "data-dismiss" => "alert", :type => "button"}
            %span{"aria-hidden" => "true"} ×   
          %h2{'style' => "text-align:center;"}= "There are #{pluralize(@user.errors.count, "error")}."
          %ul
            - @customer.errors.full_messages.each do |msg|
              %li= msg
      - if flash[:result] == "success" && flash[:last_action] == "update_info"
        .alert.alert-success.alert-dismissible.fade.in{:role => "alert"}
          %button.close{"aria-label" => "Close", "data-dismiss" => "alert", :type => "button"}
            %span{"aria-hidden" => "true"} ×
          Customer information is stored successfully.
      - if flash[:result] == "failed" && flash[:last_action] == "update_info"
        .alert.alert-danger.alert-dismissible.fade.in{:role => "alert"}
          %button.close{"aria-label" => "Close", "data-dismiss" => "alert", :type => "button"}
            %span{"aria-hidden" => "true"} ×
          Customer information is not stored successfully.
  .form-group
    %h4 Basic Information    
    .col-md-6.col-sm-6.col-xs-12{:style => "padding-right: 0;"}  
      .row
        %label.col-md-4.col-sm-4.col-xs-12.control-label First Name*
        .col-md-8.col-sm-8.col-xs-12.form-group.has-feedback
          = f.text_field :first_name, autofocus: true, class: 'form-control has-feedback-left', :required => 'true', :placeholder => "First Name"
          %span.fa.fa-user.form-control-feedback.left{"aria-hidden" => "true"}
      .row
        %label.col-md-4.col-sm-4.col-xs-12.control-label Last Name*
        .col-md-8.col-sm-8.col-xs-12.form-group.has-feedback
          = f.text_field :last_name, class: 'form-control has-feedback-left', :required => 'true', :placeholder => "Last Name"
          %span.fa.fa-user.form-control-feedback.left{"aria-hidden" => "true"}
      .row
        %label.col-md-4.col-sm-4.col-xs-12.control-label Phone Number*
        .col-md-8.col-sm-8.col-xs-12.form-group.has-feedback
          = f.text_field :phone, class: 'form-control has-feedback-left', :placeholder => "Phone Number"
          %span.fa.fa-phone.form-control-feedback.left{"aria-hidden" => "true"}
      .row
        %label.col-md-4.col-sm-4.col-xs-12.control-label Email Address*
        .col-md-8.col-sm-8.col-xs-12.form-group.has-feedback
          = f.email_field :email, class: 'form-control has-feedback-left', :required => 'true', :placeholder => "Email Address"
          %span.fa.fa-envelope.form-control-feedback.left{"aria-hidden" => "true"}
    .col-md-6.col-sm-6.col-xs-12{:style => "padding-right: 0;"}  
      .row
        %label.col-md-4.col-sm-4.col-xs-12.control-label Company Name*
        .col-md-8.col-sm-8.col-xs-12.form-group.has-feedback
          = f.text_field :company_name, class: 'form-control has-feedback-left', :placeholder => "Company Name"
          %span.fa.fa-building.form-control-feedback.left{"aria-hidden" => "true"}
      .row
        %label.col-md-4.col-sm-4.col-xs-12.control-label Trading Name*
        .col-md-8.col-sm-8.col-xs-12.form-group.has-feedback
          = f.text_field :trading_name, class: 'form-control has-feedback-left', :placeholder => "Trading Name"
          %span.fa.fa-building.form-control-feedback.left{"aria-hidden" => "true"}
      .row
        %label.col-md-4.col-sm-4.col-xs-12.control-label Company Reg Number
        .col-md-8.col-sm-8.col-xs-12.form-group.has-feedback
          = f.text_field :company_reg_no, class: 'form-control has-feedback-left', :placeholder => "Company Registration Number"
          %span.fa.fa-info.form-control-feedback.left{"aria-hidden" => "true"}
      .row
        %label.col-md-4.col-sm-4.col-xs-12.control-label Company GST No
        .col-md-8.col-sm-8.col-xs-12.form-group.has-feedback
          = f.text_field :company_gst_no, class: 'form-control has-feedback-left', :placeholder => "Company GST No"
          %span.fa.fa-info.form-control-feedback.left{"aria-hidden" => "true"}
      .row
        %label.col-md-4.col-sm-4.col-xs-12.control-label Fax
        .col-md-8.col-sm-8.col-xs-12.form-group.has-feedback
          = f.text_field :fax, class: 'form-control has-feedback-left', :placeholder => "Fax"
          %span.fa.fa-fax.form-control-feedback.left{"aria-hidden" => "true"}
  .divider-dashed
  .row
    .col-md-12.text-right.checkbox
      %label
        %input{:type => 'checkbox', :id => 'address_substitute'}
          Shipping Address same as Billing Address
  .row
    .col-md-6{:style => "padding-right: 0;"}  
      %h4 Billing Address
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Street Name
        .col-md-8.col-sm-8.col-xs-12
          = f.text_field :bill_street, class: 'form-control', :placeholder => "Street Name"
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Suburb
        .col-md-8.col-sm-8.col-xs-12
          = f.text_field :bill_suburb, class: 'form-control', :placeholder => "Suburb"
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 City
        .col-md-8.col-sm-8.col-xs-12
          = f.text_field :bill_city, class: 'form-control', :placeholder => "City Name"
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 State
        .col-md-8.col-sm-8.col-xs-12
          #bill_state_wrapper
            = render partial: 'select_bill_state', locals:{ parent_region: f.object.bill_country }
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Country
        .col-md-8.col-sm-8.col-xs-12
          = f.country_select :bill_country, priority: %w(NZ), prompt: 'Select a Country'
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Postcode
        .col-md-8.col-sm-8.col-xs-12
          = f.text_field :bill_postcode, class: 'form-control', :placeholder => "Postcode"
    .col-md-6{:style => "padding-right: 0;"}    
      %h4 Shipping Address
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Street Name
        .col-md-8.col-sm-8.col-xs-12
          = f.text_field :ship_street, class: 'form-control', :placeholder => "Street Name"
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Suburb
        .col-md-8.col-sm-8.col-xs-12
          = f.text_field :ship_suburb, class: 'form-control', :placeholder => "Suburb"
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 City
        .col-md-8.col-sm-8.col-xs-12
          = f.text_field :ship_city, class: 'form-control', :placeholder => "City Name"
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 State
        .col-md-8.col-sm-8.col-xs-12
          #ship_state_wrapper
            = render partial: 'select_ship_state', locals:{ parent_region: f.object.ship_country }
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Country
        .col-md-8.col-sm-8.col-xs-12
          = f.country_select :ship_country, priority: %w(NZ), prompt: 'Select a Country'
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Postcode
        .col-md-8.col-sm-8.col-xs-12
          = f.text_field :ship_postcode, class: 'form-control', :placeholder => "Postcode"
  .divider-dashed
  .row
    .col-md-6{:style => "padding-right: 0;"}  
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Payment Term*
        .col-md-8.col-sm-8.col-xs-12
          = f.select :payment_term_id, PaymentTerm.all.map{|x| [x.name, x.id]}, {}, {:class => 'form-control', :required => "true"}
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Price List
        .col-md-8.col-sm-8.col-xs-12
          = f.collection_select :default_price, Price.select(:name).group(:name), :name, :name, {:include_blank => true}, {:class => 'form-control'}
  .row
    .col-md-6{:style => "padding-right: 0;"}  
      .form-group
        %label.control-label.col-md-4.col-sm-4.col-xs-12 Documents
        .col-md-8.col-sm-8.col-xs-12
          = file_field_tag "documents[]", type: :file, multiple: true, class: 'form-control'          
  .ln_solid
  .form-group
    .col-md-12{:style => 'text-align: right;'}
      = f.submit "Save", class: 'btn btn-primary'
:javascript
  var edit_form = '#new_customer';
  var type_prefix = '#customer';
  var type_preffix_path = '/customers';
= javascript_include_tag 'people_edit', 'data-turbolinks-track' => true
