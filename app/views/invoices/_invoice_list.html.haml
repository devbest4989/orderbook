.row
  .col-md-12.col-sm-12.col-xs-12
    .title_right
      .col-md-8.col-sm-8.col-xs-12
        - if !params[:key].blank?
          %h4
            Search by "#{params[:key]}"
  .col-md-12
    %table.table.table-hover.projects
      %thead
        %tr
          %th{width: '1%'}
            %input.group-checkable{type: 'checkbox'}
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'date', sort: 'asc'} do
              Date
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'invoice_no', sort: 'asc'} do
              Invoice#
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'order_no', sort: 'asc'} do
              Sales Order#
          %th{width: '20%'}
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'company', sort: 'asc'} do
              Customer Name
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'status', sort: 'asc'} do
              Status
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'payment', sort: 'asc'} do
              Payment Due
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'total', sort: 'asc'} do
              Amount
          %th
            = link_to 'javascript:;', class: 'link_order_by', data:{key: 'amount', sort: 'asc'} do
              Balance
      %tbody
      - @invoices.each do |invoice|
        %tr{class: "status"}
          %td.bulk_action  
            %input{type: 'checkbox', value: "#{invoice.id}", name: "table_records"}
          %td
            = invoice.created_at.to_date
          %td
            =link_to invoice_path(invoice, type: params[:type]) do
              = invoice.token          
            / - if invoice.file_name.blank? || invoice.is_updated_pdf
            /   =link_to generate_pdf_invoice_path(invoice), :method=> :post, target: '_blank' do
            /     = invoice.token
            / - else
            /   =link_to invoice.file_name_path, target: '_blank' do
            /     = invoice.token
          %td
            %a{:href => sales_order_path(id: invoice.sales_order.id, type: 'all')}
              = invoice.sales_order.token
          %td
            %a{:href => customer_path(id: invoice.sales_order.customer.id)}
              = invoice.sales_order.customer_full_name.html_safe
          %td
            %span.label{class: invoice.status_class}=invoice.status_text.upcase
          %td
            = invoice.payment_date
          %td
            = invoice.total
          %td
            = invoice.total - invoice.total_paid

  .col-md-12{:style => "text-align: center;"}  
    = will_paginate @invoices, renderer: BootstrapPagination::Rails, :previous_label => '&lsaquo;', :next_label => '&rsaquo;'
    %input{type: 'hidden', id: 'params', data: { order: "#{params[:order]}", sort: "#{params[:sort]}", key: "#{params[:key]}", type: "#{params[:type]}"}}
:javascript
  jQuery(document).ready(function() {
    InvoiceList.initInvoiceList();
  });